<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Health Tracker</title>
<style>
  body{margin:0;font-family:Arial, sans-serif;background:#f4f6fb;display:flex;color:#333;}
  .sidebar{width:220px;background:#1e3a8a;color:white;display:flex;flex-direction:column;padding:20px;}
  .sidebar h2{margin:0 0 20px;}
  .nav button{background:transparent;border:none;color:white;text-align:left;padding:10px;margin-bottom:6px;border-radius:6px;cursor:pointer;width:100%;}
  .nav button.active,.nav button:hover{background:#2563eb;}
  .main{flex:1;padding:20px;}
  .page{display:none;}
  .page.active{display:block;}
  .card{background:white;padding:20px;border-radius:10px;box-shadow:0 3px 8px rgba(0,0,0,0.1);margin-bottom:20px;}
  h2{color:#1e40af;margin-top:0;}
  input,textarea,select{width:100%;padding:10px;margin:8px 0;border:1px solid #ccc;border-radius:6px;}
  button.action{background:#2563eb;color:white;border:none;padding:10px 14px;border-radius:6px;cursor:pointer;}
  button.action:hover{background:#1d4ed8;}
  .list-item{padding:10px;border-bottom:1px solid #eee;}
  .chat-box{height:200px;overflow:auto;background:#f9fafb;padding:10px;border:1px solid #ccc;border-radius:8px;margin-bottom:10px;}
  .chat-msg{margin:5px 0;padding:8px;border-radius:6px;max-width:80%;}
  .user{background:#2563eb;color:white;margin-left:auto;}
  .bot{background:#e2e8f0;}
</style>
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <h2>üåø Health</h2>
    <div class="nav">
      <button data-page="dashboard" onclick="navigate('dashboard')">Dashboard</button>
      <button data-page="profile" onclick="navigate('profile')">Profile</button>
      <button data-page="meals" onclick="navigate('meals')">Meals</button>
      <button data-page="symptoms" onclick="navigate('symptoms')">Symptoms</button>
      <button data-page="meds" onclick="navigate('meds')">Medications</button>
      <button data-page="lifestyle" onclick="navigate('lifestyle')">Lifestyle</button>
      <button data-page="reports" onclick="navigate('reports')">Reports</button>
      <button data-page="assistant" onclick="navigate('assistant')">AI Assistant</button>
      <button data-page="suggestions" onclick="navigate('suggestions')">Suggestions</button>
    </div>
  </div>

  <!-- Main -->
  <div class="main">
    <!-- Dashboard -->
    <div id="page-dashboard" class="page active">
      <div class="card">
        <h2>Welcome to Your Health Tracker</h2>
        <p>Here‚Äôs a quick glance at your health today:</p>
        <ul>
          <li>üë§ Profile completed: <span id="profile-status">No</span></li>
          <li>üçΩÔ∏è Meals logged: <span id="meal-count">0</span></li>
          <li>ü§í Symptoms logged: <span id="symptom-count">0</span></li>
        </ul>
      </div>
    </div>

    <!-- Profile -->
    <div id="page-profile" class="page">
      <div class="card">
        <h2>üë§ Profile</h2>
        <input id="name" placeholder="Name">
        <input id="age" type="number" placeholder="Age">
        <input id="height" type="number" placeholder="Height (cm)">
        <input id="weight" type="number" placeholder="Weight (kg)">
        <input id="disease" placeholder="Diseases (if any)">
        <button class="action" onclick="saveProfile()">Save Profile</button>
      </div>
    </div>

    <!-- Meals -->
    <div id="page-meals" class="page">
      <div class="card">
        <h2>üçΩÔ∏è Meals</h2>
        <input id="meal-text" placeholder="What did you eat?">
        <button class="action" onclick="addMeal()">Log Meal</button>
      </div>
      <div class="card">
        <h3>Meal History</h3>
        <div id="meal-list"></div>
      </div>
    </div>

    <!-- Symptoms -->
    <div id="page-symptoms" class="page">
      <div class="card">
        <h2>ü§í Symptoms</h2>
        <input id="symptom" placeholder="Symptom">
        <input id="severity" type="number" placeholder="Severity (1-10)">
        <textarea id="symptom-notes" placeholder="Notes"></textarea>
        <button class="action" onclick="addSymptom()">Log Symptom</button>
      </div>
      <div class="card">
        <h3>Logged Symptoms</h3>
        <div id="symptom-list"></div>
      </div>
    </div>

    <!-- Medications -->
    <div id="page-meds" class="page">
      <div class="card">
        <h2>üíä Medications</h2>
        <input id="med-name" placeholder="Medicine name">
        <input id="med-dose" placeholder="Dose">
        <input id="med-time" type="time">
        <button class="action" onclick="addMed()">Save Medication</button>
      </div>
      <div class="card">
        <h3>Medication Schedule</h3>
        <div id="med-list"></div>
      </div>
    </div>

    <!-- Lifestyle -->
    <div id="page-lifestyle" class="page">
      <div class="card">
        <h2>üèÉ Lifestyle</h2>
        <input id="sleep" type="number" placeholder="Sleep hours">
        <input id="exercise" type="number" placeholder="Exercise minutes">
        <button class="action" onclick="addLifestyle()">Save Lifestyle</button>
      </div>
      <div class="card">
        <h3>Lifestyle Logs</h3>
        <div id="life-list"></div>
      </div>
    </div>

    <!-- Reports -->
    <div id="page-reports" class="page">
      <div class="card">
        <h2>üìë Upload Reports</h2>
        <input type="file" multiple onchange="uploadReports(event)">
        <div class="reports" id="report-list"></div>
      </div>
    </div>

    <!-- AI Assistant -->
    <div id="page-assistant" class="page">
      <div class="card">
        <h2>ü§ñ AI Assistant</h2>
        <div class="chat-box" id="chat-box"></div>
        <input id="ai-input" placeholder="Ask me anything...">
        <button class="action" onclick="askAI()">Send</button>
      </div>
    </div>

    <!-- Suggestions -->
    <div id="page-suggestions" class="page">
      <div class="card">
        <h2>üí° Suggestions</h2>
        <div id="suggestion-box">Fill in your profile and logs to get suggestions.</div>
      </div>
    </div>
  </div>

<script>
let data = JSON.parse(localStorage.getItem("health")||"{}");

/* Navigation with hash */
function navigate(page){ location.hash = page; }
function showPage(page){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.querySelectorAll(".nav button").forEach(b=>b.classList.remove("active"));
  document.getElementById("page-"+page)?.classList.add("active");
  document.querySelector(`.nav button[data-page="${page}"]`)?.classList.add("active");
  render();
}
window.addEventListener("hashchange", ()=>showPage(location.hash.replace("#","")||"dashboard"));
window.addEventListener("load", ()=>showPage(location.hash.replace("#","")||"dashboard"));

/* Profile */
function saveProfile(){
  data.profile={
    name:document.getElementById("name").value,
    age:document.getElementById("age").value,
    h:document.getElementById("height").value,
    w:document.getElementById("weight").value,
    d:document.getElementById("disease").value
  };
  save();
  alert("Profile saved");
}
function bmi(){
  if(!data.profile||!data.profile.h||!data.profile.w) return null;
  return (data.profile.w/((data.profile.h/100)**2)).toFixed(1);
}

/* Meals */
function addMeal(){
  if(!data.meals) data.meals=[];
  let txt=document.getElementById("meal-text").value;
  if(txt) data.meals.push({txt,time:new Date().toLocaleString()});
  save();
  document.getElementById("meal-text").value="";
  render();
}

/* Symptoms */
function addSymptom(){
  if(!data.symptoms) data.symptoms=[];
  let t=document.getElementById("symptom").value;
  let s=document.getElementById("severity").value;
  let n=document.getElementById("symptom-notes").value;
  if(t) data.symptoms.push({t,s,n,time:new Date().toLocaleString()});
  save();render();
}

/* Meds */
function addMed(){
  if(!data.meds) data.meds=[];
  let n=document.getElementById("med-name").value;
  let d=document.getElementById("med-dose").value;
  let t=document.getElementById("med-time").value;
  if(n) data.meds.push({n,d,t});
  save();render();
}

/* Lifestyle */
function addLifestyle(){
  if(!data.life) data.life=[];
  let s=document.getElementById("sleep").value;
  let e=document.getElementById("exercise").value;
  data.life.push({s,e,time:new Date().toLocaleString()});
  save();render();
}

/* Reports */
function uploadReports(e){
  if(!data.reports) data.reports=[];
  [...e.target.files].forEach(f=>data.reports.push(f.name));
  save();render();
}

/* AI Assistant (dummy) */
function askAI(){
  let q=document.getElementById("ai-input").value;
  if(!q) return;
  let box=document.getElementById("chat-box");
  box.innerHTML+=`<div class="chat-msg user">${q}</div>`;
  document.getElementById("ai-input").value="";
  setTimeout(()=>{
    box.innerHTML+=`<div class="chat-msg bot">I see. ${q}? Please consult your doctor for accurate guidance.</div>`;
    box.scrollTop=box.scrollHeight;
  },500);
}

/* Suggestions */
function genSuggestions(){
  let s=[];
  if(data.profile){
    let b=bmi();
    if(b){ s.push("Your BMI is "+b);
      if(b<18.5) s.push("‚ö†Ô∏è Underweight: eat more protein & calories.");
      else if(b>25) s.push("‚ö†Ô∏è Overweight: exercise & balanced diet.");
      else s.push("‚úÖ Healthy weight."); }
    if(data.profile.d) s.push("Reported disease: "+data.profile.d+". Please follow medical advice.");
  }
  if(data.symptoms){
    data.symptoms.forEach(sym=>{
      if(sym.s>=7) s.push("Severe symptom: "+sym.t+" ‚Äî consider a doctor.");
    });
  }
  return s.length? s.join("<br>"):"No suggestions yet.";
}

/* Save & Render */
function save(){ localStorage.setItem("health",JSON.stringify(data)); }
function render(){
  // dashboard
  document.getElementById("profile-status").innerText=data.profile?"Yes":"No";
  document.getElementById("meal-count").innerText=(data.meals||[]).length;
  document.getElementById("symptom-count").innerText=(data.symptoms||[]).length;
  // meals
  document.getElementById("meal-list").innerHTML=(data.meals||[]).map(m=>`<div class="list-item">${m.txt} <small>${m.time}</small></div>`).join("");
  // symptoms
  document.getElementById("symptom-list").innerHTML=(data.symptoms||[]).map(s=>`<div class="list-item">${s.t} (sev:${s.s})</div>`).join("");
  // meds
  document.getElementById("med-list").innerHTML=(data.meds||[]).map(m=>`<div class="list-item">${m.n} - ${m.d} at ${m.t}</div>`).join("");
  // lifestyle
  document.getElementById("life-list").innerHTML=(data.life||[]).map(l=>`<div class="list-item">Sleep ${l.s}h, Exercise ${l.e}min</div>`).join("");
  // reports
  document.getElementById("report-list").innerHTML=(data.reports||[]).map(r=>`<div class="report-card">${r}</div>`).join("");
  // suggestions
  document.getElementById("suggestion-box").innerHTML=genSuggestions();
}
</script>
</body>
</html>
